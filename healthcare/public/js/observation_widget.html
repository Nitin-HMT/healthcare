<div class="observation-section grouped-obs" style="background-color:var(--bg-color);">
	<div class="observation-section">
	<div class="section-body">
		<div class="observations pr-1">
				{% if (observation_details.observation) { %}
					<div class="observation" name="{{ observation_details.observation.name }}" addatatype="{{ observation_details.observation.permitted_data_type }}" >
						<div class="observation-details row" style="width: 100%;" name="{{ observation_details.observation.name }}">
							<div class="observation-name obs-field" id="observation-name" style="width: 20%;" value="{{observation_details.observation.name}}">
								<a href="/app/observation/{{ observation_details.observation.name }}" title="{{ __('Observation') }}">
									{% if (observation_details.observation.preferred_display_name) { %}
										{%= observation_details.observation.preferred_display_name %}
									{% } else { %}
										{%= observation_details.observation.observation_template %}
									{% } %}
								</a>
								<div>
									<span class="add-note-observation-btn btn btn-link">
										<svg class="icon icon-sm"><use xlink:href="#icon-small-message"></use></svg>
									</span>
								</div>
							</div>
							<div class="obs-field" style="width: 19%;">
								<div class="">
									{% if (observation_details.observation.specimen) { %}
									<a href="/app/specimen/{{ observation_details.observation.specimen }}" title="{{ observation_details.observation.specimen }}">
										{%= observation_details.observation.specimen %}
									</a>
									{% } %}
								</div>
								<div class="text-muted" style="font-size: 10px;">
								{% if (observation_details.observation.received_time) { %}
									{{ frappe.datetime.global_date_format(observation_details.observation.received_time) }}
								{% } %}
								</div>
							</div>
							{% let allow_input = "" %}
							<div class="result obs-field" style="padding-left:30px; padding-right:10px; width: 20%;">
<<<<<<< HEAD
								{% var input_readonly = "" %}
								{% var input_disabled = "" %}
								{% if ([1, 2].includes(docstatus)) { %}
									{% var input_readonly = "readonly" %}
									{% input_disabled = "disabled" %}
								{% } %}
								{% if( ['Range', 'Ratio', 'Quantity', 'Numeric'].includes(observation_details.observation.permitted_data_type)) { %}
									<div class="">
										<input class="input-with-feedback form-control result-text" type="text" id="{{observation_details.observation.name}}" name="fname" size="6" value="{{ observation_details.observation.result_data }}" {{input_readonly}}>
=======
								{% if ([1, 2].includes(docstatus)) {  %}
								{% allow_input = "readonly" %}
									{% allow_input = "readonly" %}
								{% } %}

								{% if( ['Range', 'Ratio', 'Quantity', 'Numeric'].includes(observation_details.observation.permitted_data_type)) { %}
									<div class="">
										<input class="input-with-feedback form-control result-text" type="text" id="{{observation_details.observation.name}}" name="fname" size="6" value="{{ observation_details.observation.result_data }}" {{allow_input}}>
>>>>>>> 6ad8231466... Diagnostic Report Widget - change WIP
								{% } else if (observation_details.observation.permitted_data_type=='Text') { %}
									{% var text_result = observation_details.observation.result_text %}
									{% if (text_result && text_result.includes('</div>')) { %}
										{% var tempElement = document.createElement('div'); %}
										{% tempElement.innerHTML = text_result; %}
										{% var paragraphElement = tempElement.querySelector('p'); %}
										{% var text_result = paragraphElement.textContent %}
									{% } %}
									<div class="">
<<<<<<< HEAD
										<input class="input-with-feedback form-control result-text" type="text" id="{{observation_details.observation.name}}" name="fname" size="6" value='{{ text_result }}' {{input_readonly}}>
=======
										<input class="input-with-feedback form-control result-text" type="text" id="{{observation_details.observation.name}}" name="fname" size="6" value="{{ observation_details.observation.result_text }}" {{allow_input}}>
>>>>>>> 6ad8231466... Diagnostic Report Widget - change WIP
								{% } else if (observation_details.observation.permitted_data_type=='Select') { %}
								<div class="control-input" style="display: flex;">
									<select class="input-with-feedback form-control ellipsis result-text" style="float:left" id="{{observation_details.observation.name}}" {{disabled}}>
										<option value="Null"></option>
										{% for (let opts in observation_details.observation.options_list) { %}
											{% if (observation_details.observation.options_list[opts]) { %}
												{% var selected = "" %}
												{% if (observation_details.observation.options_list[opts] == observation_details.observation.result_select) { %}
													{% selected = "selected" %}
												{% } %}
												<option value="{{observation_details.observation.options_list[opts]}}"{{ selected }}>{{observation_details.observation.options_list[opts]}}</option>
											{% } %}
										{% } %}
										</select>
										<div class="select-icon obser-select">
											<svg class="icon  icon-sm" style="margin-top: 7px;">
												<use class="" href="#icon-select"></use>
											</svg>
										</div>
								{% } %}
								{% if( ['Range', 'Ratio', 'Quantity', 'Numeric', 'Select', 'Text'].includes(observation_details.observation.permitted_data_type)) { %}
								</div>
								<div class="text-muted" style="font-size: 10px; padding-left: 25px;">
									{% if (observation_details.observation.time_of_result) { %}
										{{ frappe.datetime.global_date_format(observation_details.observation.time_of_result) }}
									{% } %}
								</div>
								{% } %}
							</div>
							<div class="obs-field" style="width: 7%;">
								{% if (observation_details.observation.permitted_unit) { %}
									{%= observation_details.observation.permitted_unit %}
								{% } %}
							</div>
							<div class="obs-field" style="width: 19%;">
								{% if (observation_details.observation.method) { %}
									{%= observation_details.observation.method %}
								{% } %}
							</div>
							<div class="obs-field" style="width: 11%;">
								{% if (observation_details.observation.reference) { %}
									{{observation_details.observation.reference}}
								{% } %}
							</div>
							<div class="obs-field" style="width: 1%;">
								{%  if (!['Authorised', 'Unauthorised'].includes(observation_details.observation.status)) { %}
								<span class="authorise-btn btn btn-link" title="Authorise" value="Authorised">
									<svg class="icon icon-sm"><use xlink:href="#icon-check"></use></svg>
								</span>
								{% } else if (observation_details.observation.status=='Authorised') { %}
								<span class="authorise-btn btn btn-link" title="Unauthorise" value="Unauthorised">
									<b>X</b>
								</span>
								{% } %}
							</div>
						</div>
						{%  if (observation_details.observation.observation_category=='Imaging') { %}
								<div style="width:100%;  padding-bottom:20px; display: flex;">
									<div style="width:50%; padding-right:5px;">
										<button class="btn btn-default btn-findings" style="font-size: 10px;" name="{{ observation_details.observation.result_template }}">
											Findings
										</button>
										{% if (observation_details.observation.result_text) { %}
											<div class="frappe-control result-text-editor btn-findings-text" data-fieldtype="Text Editor" data-fieldname="result_text">
												{{observation_details.observation.result_text}}
											</div>
										{% } %}
									</div>
									<div style="width:50%; padding-left:5px;">
										<button class="btn btn-default btn-interpr" style="font-size: 10px;" name="{{ observation_details.observation.interpretation_template }}">
											Interpretation
										</button>
										{% if (observation_details.observation.result_interpretation) { %}
											<div class="frappe-control result-text-editor btn-interpr-text" data-fieldtype="Text Editor" data-fieldname="result_text">
												{{observation_details.observation.result_interpretation}}
											</div>
										{% } %}
									</div>
								</div>
								{% } %}
						{% if (observation_details.observation.note)  { %}
							<div class="note">
									{{observation_details.observation.note}}
							</div>
						{% } %}
					</div>
				{% } %}
		</div>
	</div>
</div>
	</div>
</div>


<style>


</style>