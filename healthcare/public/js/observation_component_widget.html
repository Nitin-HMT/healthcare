<div class="observation-section grouped-obs">
	<div class="section-body">
		<div class="observations pr-1">
				{% if (observation_details[observation_details.observation] && observation_details[observation_details.observation].length>0) { %}
				<div class="">
						<div class="flex justify-between" style="padding-bottom: 10px;">
								<b>
									<a href="/app/observation/{{ observation_details.observation }}" title="{{ __('Grouped Observations') }}">
										{%= observation_details.display_name %}
									</a>
								</b>
						</div>
						{% for(var j=0, k=observation_details[observation_details.observation].length; j<k; j++) { %}
							{% if (observation_details[observation_details.observation][j].observation || observation_details[observation_details.observation][j].template_reference) { %}
								<div class="observation" name="{{ observation_details[observation_details.observation][j].observation.name }}" addatatype="{{ observation_details[observation_details.observation][j].observation.permitted_data_type }}">
									<div class="observation-details row" style="width: 100%;">
										<div class="observation-name" id="observation-name" style="width: 20%;" value="{{observation_details[observation_details.observation][j].observation.name}}">
											<a href="/app/observation/{{ observation_details[observation_details.observation][j].observation.name }}" title="{{ __('Observation') }}">
												{% if (observation_details[observation_details.observation][j].template_reference.preferred_display_name) { %}
													{%= observation_details[observation_details.observation][j].template_reference.preferred_display_name %}
												{% } else { %}
													{%= observation_details[observation_details.observation][j].observation.observation_template %}
												{% } %}
											</a>
										</div>
										<div style="width: 19%;">
											{% if (observation_details[observation_details.observation][j].observation.posting_datetime) { %}
												{{ frappe.datetime.global_date_format(observation_details[observation_details.observation][j].observation.posting_datetime) }}
											{% } %}
										</div>
										<div class="result" style="padding-left:30px; padding-right:10px; width: 23%;">
											{% if( ['Range', 'Ratio'].includes(observation_details[observation_details.observation][j].observation.permitted_data_type)) { %}
												<div class="">
													<input class="input-with-feedback form-control result-text" type="text" id="{{observation_details[observation_details.observation][j].observation.name}}" name="fname" size="6" value="{{ observation_details[observation_details.observation][j].observation.result_data }}">
											{% } else if (['Quantity', 'Numeric'].includes(observation_details[observation_details.observation][j].observation.permitted_data_type)) { %}
												<div class="">
													<input class="input-with-feedback form-control result-text" type="text" id="{{observation_details[observation_details.observation][j].observation.name}}" name="fname" size="6" value="{{ observation_details[observation_details.observation][j].observation.result_float }}">
											{% } %}
											{% if( ['Range', 'Ratio', 'Quantity', 'Numeric'].includes(observation_details[observation_details.observation][j].observation.permitted_data_type)) { %}
											</div>
											{% } %}
										</div>
										<div style="width: 7%;">
											{% if (observation_details[observation_details.observation][j].template_reference) { %}
												{%= observation_details[observation_details.observation][j].template_reference.permitted_unit %}
											{% } %}
										</div>
										<div style="width: 20%;">
											{% if (observation_details[observation_details.observation][j].template_reference) { %}
												{%= observation_details[observation_details.observation][j].template_reference.method %}
											{% } %}
										</div>
										<div style="width: 11%;">
											{% if (observation_details[observation_details.observation][j].template_reference.display_reference) { %}
												{{observation_details[observation_details.observation][j].template_reference.display_reference}}
											{% } %}
										</div>
								</div>
								{% if (observation_details[observation_details.observation][j].observation.permitted_data_type=='Text')  { %}
								<div class="obs-text">
									<input class="input-with-feedback form-control textresult-text result-text" type="text" id="{{observation_details[observation_details.observation][j].observation.name}}" name="fname" size="6" value="{{ observation_details[observation_details.observation][j].observation.result_text }}">
								</div>
								{% } %}
								<div style="width: 100%; padding: 0px; padding-bottom:10px; padding-top:10px; display: flex;">
									<div style="width: 10%;">
										<span class="add-note-observation-btn btn btn-link">
											<svg class="icon icon-sm"><use xlink:href="#icon-small-message"></use></svg>
										</span>
									</div>
								<div class="remarks" style="width: 50%; float:right;">
									{% if (observation_details[observation_details.observation][j].observation.remarks)  { %}
										{{observation_details[observation_details.observation][j].observation.remarks}}
									{% } %}
								</div>
							</div>
							</div>
							{% } %}
						{% } %}
						</div>
				{% } %}
		</div>
	</div>
</div>
	</div>


<style>
.observation-section {
	min-height: 50px;
	padding-left: 0px;
	padding-bottom: 1px !important;
}

.observation-section .new-btn {
	text-align: right;
}

.observation {
	min-height: 90px;
	border: 1px solid var(--border-color);
	padding-right: 0;
	font-size: 11px;
	padding-left: 15px;
	padding-top: 35px;
	margin-bottom: 15px;
	margin-right: 15px;
	border-radius: 10px;
}
.grouped-obs {
	min-height: 90px;
	border: 1px solid var(--border-color);
	padding-right: 0;
	font-size: 11px;
	padding-left: 15px;
	padding-top: 15px;
	border-radius: 10px;
}

.observations {
	width: 100%;
}

.observation-details {
	padding-left: 14px;
	padding-right: 14px;
}


</style>